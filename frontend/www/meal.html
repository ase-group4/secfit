<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Meal</title>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1"
      crossorigin="anonymous"
    />

    <script src="https://kit.fontawesome.com/0ce6c392ca.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="styles/style.css" />
    <script src="scripts/navbar.js" type="text/javascript" defer></script>
    <script src="scripts/meals/create-ingredient-modal.js" defer></script>
  </head>
  <body>
    <navbar-el></navbar-el>

    <div class="container">
      <a href="./meals.html">
        <input type="button" class="btn btn-secondary mt-3" value="Back to meals" />
      </a>
      <h3 class="mt-3">Meal Log</h3>
      <form class="row g-3 mb-4" id="form-meal">
        <div class="col-lg-6">
          <label for="inputName" class="form-label">Name</label>
          <input type="text" class="form-control" id="inputName" name="name" readonly />
        </div>
        <div class="col-lg-6"></div>
        <div class="col-lg-6">
          <label for="inputDateTime" class="form-label">Date/Time</label>
          <input
            type="datetime-local"
            class="form-control"
            id="inputDateTime"
            name="date"
            readonly
          />
        </div>
        <div class="col-lg-6"></div>
        <div class="col-lg-6">
          <label for="inputOwner" class="form-label">Owner</label>
          <input type="text" class="form-control" id="inputOwner" name="owner_username" readonly />
        </div>
        <div class="col-lg-6"></div>
        <div class="col-lg-6">
          <label for="inputNotes" class="form-label">Notes</label>
          <textarea class="form-control" id="inputNotes" name="notes" readonly></textarea>
        </div>
        <div class="col-lg-6"></div>
        <div class="col-lg-6">
          <div class="d-flex justify-content-between align-items-end mb-2">
            <label for="add-ingredient" class="form-label">Ingredients</label>
            <button
              type="button"
              id="meal-create-new-ingredient"
              class="btn btn-secondary btn-sm"
              data-bs-toggle="modal"
              data-bs-target="#create-ingredient-modal"
            >
              Create new ingredient
            </button>
          </div>
          <div class="mb-2 p-2 border border-secondary rounded">
            <div class="text-center fw-bold">Nutrition Totals</div>
            <div class="d-flex align-items-center justify-content-between">
              <div class="meal-ingredient-calories-total me-1"></div>
              <div class="meal-ingredient-protein-total me-1"></div>
              <div class="meal-ingredient-fat-total me-1"></div>
              <div class="meal-ingredient-carbohydrates-total"></div>
            </div>
          </div>
          <div id="meal-ingredient-input-container">
            <datalist id="meal-ingredient-options"></datalist>
            <template id="meal-ingredient-input-template">
              <div class="p-2 border border-secondary rounded mb-2">
                <div class="d-flex align-items-center justify-content-between mb-2">
                  <form class="meal-ingredient-input-form d-flex align-items-center flex-grow-1">
                    <input
                      class="form-control me-2 meal-ingredient-input"
                      list="meal-ingredient-options"
                      placeholder="Choose ingredient..."
                    />
                    <input type="hidden" name="ingredient" class="meal-ingredient-hidden-input" />
                    <div class="input-group me-2">
                      <input
                        type="number"
                        class="form-control meal-ingredient-weight-input"
                        name="weight"
                        placeholder="Weight"
                      />
                      <span class="input-group-text">grams</span>
                    </div>
                  </form>
                  <input
                    type="button"
                    class="btn btn-danger meal-ingredient-remove-button"
                    value="Remove"
                  />
                </div>
                <div class="d-flex align-items-center justify-content-between">
                  <div class="meal-ingredient-calories-field"></div>
                  <div class="meal-ingredient-protein-field me-1"></div>
                  <div class="meal-ingredient-fat-field me-1"></div>
                  <div class="meal-ingredient-carbohydrates-field"></div>
                </div>
              </div>
            </template>
          </div>
          <input
            type="button"
            class="btn btn-primary w-100"
            id="meal-ingredient-add-button"
            value="Add ingredient"
          />
        </div>
        <div class="col-lg-6"></div>
        <div class="col-lg-6">
          <div class="input-group">
            <input
              type="file"
              class="form-control"
              id="customFile"
              name="files"
              multiple
              disabled
            />
          </div>
          <div id="uploaded-files" class="ms-1 mt-2"></div>
        </div>
        <div class="col-lg-6"></div>
        <div class="col-lg-6">
          <input type="button" class="btn btn-primary hide" id="btn-ok-meal" value="  OK  " />
          <input type="button" class="btn btn-primary hide" id="btn-edit-meal" value=" Edit " />
          <input type="button" class="btn btn-secondary hide" id="btn-cancel-meal" value="Cancel" />
          <input
            type="button"
            class="btn btn-danger float-end hide"
            id="btn-delete-meal"
            value="Delete"
          />
        </div>
        <div class="col-lg-6"></div>
      </form>
    </div>

    <create-ingredient-modal></create-ingredient-modal>

    <script src="scripts/defaults.js"></script>
    <script src="scripts/scripts.js"></script>
    <script type="module" src="scripts/meals/meal-page.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
